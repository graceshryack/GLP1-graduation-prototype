{
  "version": "1.0",
  "projectName": "GLP1 Graduation Program",
  "platform": "ios-capacitor-web",
  "screens": [
    {
      "id": "Onboarding_Welcome",
      "name": "Onboarding — Welcome",
      "purpose": "Program overview and start button",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["First screen for new users", "Step 0 of 18"]
    },
    {
      "id": "Onboarding_NameAge",
      "name": "Onboarding — Name & Age",
      "purpose": "Collect user name and age",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 1 of 18"]
    },
    {
      "id": "Onboarding_Medication",
      "name": "Onboarding — Medication History",
      "purpose": "Medication type, duration, and current status",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 2 of 18"]
    },
    {
      "id": "Onboarding_WhyOffGLP1",
      "name": "Onboarding — Why Coming Off GLP-1",
      "purpose": "Multi-select reasons for discontinuing medication",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 3 of 18"]
    },
    {
      "id": "Onboarding_BodyActivity",
      "name": "Onboarding — Body & Activity",
      "purpose": "Weight, goal weight, height, activity level",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 4 of 18"]
    },
    {
      "id": "Onboarding_Goals",
      "name": "Onboarding — Goals",
      "purpose": "Multi-select goals for the program",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 5 of 18"]
    },
    {
      "id": "Onboarding_PreStruggles",
      "name": "Onboarding — Pre-GLP-1 Struggles",
      "purpose": "Multi-select struggles before medication",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 6 of 18"]
    },
    {
      "id": "Onboarding_CurrentStruggles",
      "name": "Onboarding — Current Struggles",
      "purpose": "Ranked multi-select struggles that shape block order",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 7 of 18", "Directly determines personalized block ordering"]
    },
    {
      "id": "Onboarding_StrengthTraining",
      "name": "Onboarding — Strength Training",
      "purpose": "Strength training experience level (6 options)",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 8 of 18"]
    },
    {
      "id": "Onboarding_AssessmentQ1",
      "name": "Onboarding — Assessment Question 1",
      "purpose": "Baseline self-assessment quiz (rated 1-5)",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 9 of 18", "Same questions used in mid-program and post-program check-ins"]
    },
    {
      "id": "Onboarding_AssessmentQ5",
      "name": "Onboarding — Assessment Question 5",
      "purpose": "Mid-point of baseline assessment quiz",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 13 of 18"]
    },
    {
      "id": "Onboarding_PersonalizedProgram",
      "name": "Onboarding — Your Personalized Program",
      "purpose": "Shows personalized 16-week roadmap and per-question feedback",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Step 17 of 18", "Start your graduation button"]
    },
    {
      "id": "Home_CGM_Active",
      "name": "Home — CGM Active",
      "purpose": "Dashboard with live CGM graph, graduation card, hunger coach, GPA strip",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Blue border, LIVE badge", "Primary dashboard state during CGM blocks"]
    },
    {
      "id": "Home_CGM_Off",
      "name": "Home — CGM Off",
      "purpose": "Dashboard with average daily glucose graph, elevated hunger coach",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Amber border, OFF badge", "Hunger coach elevated as primary signal", "Next sensor countdown shown"]
    },
    {
      "id": "Toolkit_Main",
      "name": "Graduation Toolkit",
      "purpose": "Education hub with scrollable timeline, core principles, block goal, education sections",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["16 week dots in 8 block containers", "CGM indicators on sensor blocks", "Blocks 5-8 locked until check-in"]
    },
    {
      "id": "WeekDetail_Block1_Baseline",
      "name": "Block 1 Detail — Baseline",
      "purpose": "Block 1 goal: Observe food responses, activity, sleep, hunger with CGM",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Fixed block (not reordered)", "Includes baseline assessment card"]
    },
    {
      "id": "WeekDetail_Block2_Nutrition",
      "name": "Block 2 Detail — Nutrition",
      "purpose": "Nutrition-focused block: protein and fiber goals",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Personalized order based on struggles", "Off-CGM block"]
    },
    {
      "id": "WeekDetail_Block3_Movement",
      "name": "Block 3 Detail — Movement",
      "purpose": "Movement block: walking, steps, resistance training with CGM",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Fixed block (not reordered)", "Includes mid-program assessment card", "CGM validates movement impact on glucose"]
    },
    {
      "id": "WeekDetail_Block4_FullSystem",
      "name": "Block 4 Detail — Full System",
      "purpose": "Satiating meals, sleep, and stress with all habits maintained",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Personalized order based on struggles", "Off-CGM block"]
    },
    {
      "id": "WeekDetail_Block5_Locked",
      "name": "Block 5 Detail — Locked",
      "purpose": "Locked state showing check-in prompt for Blocks 5-8",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Start your check-in button", "Unlocks after post-Block-4 assessment"]
    },
    {
      "id": "Assessment_Baseline_Intro",
      "name": "Assessment — Baseline (Block 1)",
      "purpose": "Baseline self-assessment establishing starting point",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Integrated into onboarding", "Same 4-step flow as mid and post"]
    },
    {
      "id": "Assessment_MidProgram_Intro",
      "name": "Assessment — Mid-Program (Block 3)",
      "purpose": "Mid-program check-in measuring progress against baseline",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Compares to Block 1 scores"]
    },
    {
      "id": "Assessment_Post8_Intro",
      "name": "Assessment — Post-Foundation (Block 5)",
      "purpose": "Full check-in with focus area selection unlocking Blocks 5-8",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["4-step flow: insights -> quiz -> feedback -> focus selection", "Unlocks personalized Blocks 5-8"]
    },
    {
      "id": "Log_Main",
      "name": "Log",
      "purpose": "Central logging hub: hunger, body scanner, food, exercise, water, sleep, glucose",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Hunger check-in is primary CTA"]
    },
    {
      "id": "HungerQuestionnaire",
      "name": "Hunger Check-In",
      "purpose": "Daily hunger/fullness rating (1-5) with glucose-aware feedback",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Post-submit glucose insight card", "Links to Hunger Coach on high hunger"]
    },
    {
      "id": "HungerCoach_Landing",
      "name": "Hunger Coach — Landing",
      "purpose": "Personalized greeting, glucose card, stats, strategy card, scenario selection",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Adapts greeting based on hunger trends", "Surfaces best strategy from history"]
    },
    {
      "id": "HungerCoach_Scenario_StillHungry",
      "name": "Hunger Coach — Still Hungry",
      "purpose": "Post-meal hunger scenario with timing and composition questions",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Reactive scenario", "Branches: When did you eat? -> What did you eat? -> Stomach vs mouth"]
    },
    {
      "id": "HungerCoach_Scenario_Starving",
      "name": "Hunger Coach — Starving",
      "purpose": "Intense hunger scenario with meal timing assessment",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Reactive scenario", "When was your last meal? -> Contextual advice"]
    },
    {
      "id": "HungerCoach_Scenario_Craving",
      "name": "Hunger Coach — Craving",
      "purpose": "Craving scenario with biochemical explanations and strategies",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Reactive scenario", "Sweet/salty/rich/specific food branches"]
    },
    {
      "id": "HungerCoach_Scenario_NotHungry",
      "name": "Hunger Coach — Not Hungry But Want to Eat",
      "purpose": "Non-hunger eating with HALT check",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Reactive scenario", "2x2 HALT grid: Hungry/Angry-Anxious/Lonely-Bored/Tired"]
    },
    {
      "id": "HungerCoach_Scenario_Unsure",
      "name": "Hunger Coach — Not Sure If Hungry",
      "purpose": "Guided body scan with timed steps",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Reactive scenario", "4-step body scan with timers"]
    },
    {
      "id": "HungerCoach_Scenario_UnusualTime",
      "name": "Hunger Coach — Unusual Time Hunger",
      "purpose": "Off-schedule hunger with timing-specific advice",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Reactive scenario", "Late night/afternoon/early morning/post-workout"]
    },
    {
      "id": "HungerCoach_Scenario_AboutToEat",
      "name": "Hunger Coach — About to Eat",
      "purpose": "Pre-meal coaching with hunger assessment and meal timer",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Proactive scenario", "20-minute meal timer"]
    },
    {
      "id": "HungerCoach_Scenario_PostMeal",
      "name": "Hunger Coach — Post-Meal Reflection",
      "purpose": "Post-meal debrief with fullness assessment",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Proactive scenario", "Still hungry -> meal composition drill-down"]
    },
    {
      "id": "HungerCoach_Scenario_HungerChanging",
      "name": "Hunger Coach — Hunger Changing",
      "purpose": "Medication transition hunger education",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Learn scenario", "More/less/unpredictable/different sensation branches"]
    },
    {
      "id": "HungerCoach_Scenario_TeachMe",
      "name": "Hunger Coach — Teach Me About Hunger",
      "purpose": "Educational entry point to mini-lesson library",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Learn scenario", "5 mini-lessons accessible"]
    },
    {
      "id": "Insights_Lifestyle",
      "name": "Insights — Lifestyle Tab",
      "purpose": "Lifestyle GPA, Transition Readiness, hunger-lifestyle correlations",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["GPA detail modals with component drill-down"]
    },
    {
      "id": "Insights_Glucose",
      "name": "Insights — Glucose Tab",
      "purpose": "Glucose GPA, sensor comparison graph, hunger-glucose correlations",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Overlaid glucose curves across sensor periods", "CGM Off note during non-sensor weeks"]
    },
    {
      "id": "Insights_Graduation",
      "name": "Insights — Graduation Tab",
      "purpose": "Graduation trend graph, score summary, hunger-progress correlations",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Week-by-week GPA scores with delta tracking"]
    },
    {
      "id": "Education_CGM_Basics",
      "name": "Education — CGM Basics",
      "purpose": "Foundation module: What is a CGM?",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Glucose & CGM section", "1-3 minute read"]
    },
    {
      "id": "Education_Protein_Anchor",
      "name": "Education — Protein Anchor",
      "purpose": "Foundation module: Protein as your anchor",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Nutrition section", "1-3 minute read"]
    },
    {
      "id": "Education_Walking_Glucose",
      "name": "Education — Walking & Glucose",
      "purpose": "Foundation module: Post-meal walking for glucose management",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Exercise section", "1-3 minute read"]
    },
    {
      "id": "Game_ProteinGuess",
      "name": "Game — Protein Guess",
      "purpose": "Quiz: Compare two foods, which has more protein?",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Multi-round with immediate feedback"]
    },
    {
      "id": "Game_BuildBalancedPlate",
      "name": "Game — Build a Balanced Plate",
      "purpose": "Builder: Select protein, carb, and veggie to construct a meal",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Three-step selection with scoring"]
    },
    {
      "id": "Settings",
      "name": "Settings",
      "purpose": "User profile display, program details, reset program",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Reset button clears all data", "Shows onboarding profile data"]
    },
    {
      "id": "Program_Details",
      "name": "Program Details",
      "purpose": "Detailed program metrics, dose history, graduation readiness",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Accessed from Settings"]
    },
    {
      "id": "BodyScanner",
      "name": "Body Scanner",
      "purpose": "Camera-based body composition scan (mock)",
      "sourceFile": "ios/App/App/public/index.html",
      "annotations": ["Results: body fat %, visceral fat %, lifestyle bonus"]
    }
  ],
  "flows": [
    {
      "name": "First-Time User Onboarding",
      "steps": [
        {"screenId": "Onboarding_Welcome", "action": "Taps Get Started", "annotation": "Program overview"},
        {"screenId": "Onboarding_NameAge", "action": "Enters name and age", "annotation": ""},
        {"screenId": "Onboarding_Medication", "action": "Selects medication, duration, status", "annotation": ""},
        {"screenId": "Onboarding_WhyOffGLP1", "action": "Multi-selects reasons", "annotation": ""},
        {"screenId": "Onboarding_BodyActivity", "action": "Enters weight, height, activity", "annotation": ""},
        {"screenId": "Onboarding_Goals", "action": "Multi-selects goals", "annotation": ""},
        {"screenId": "Onboarding_PreStruggles", "action": "Multi-selects pre-GLP-1 struggles", "annotation": ""},
        {"screenId": "Onboarding_CurrentStruggles", "action": "Ranked multi-select current struggles", "annotation": "Shapes personalized block order"},
        {"screenId": "Onboarding_StrengthTraining", "action": "Selects experience level", "annotation": ""},
        {"screenId": "Onboarding_AssessmentQ1", "action": "Rates 8 questions 1-5", "annotation": "Baseline assessment"},
        {"screenId": "Onboarding_PersonalizedProgram", "action": "Reviews program, taps Start", "annotation": "Shows personalized roadmap"},
        {"screenId": "Home_CGM_Active", "action": "", "annotation": "Arrives at personalized dashboard"}
      ]
    },
    {
      "name": "Daily Hunger Check-In",
      "steps": [
        {"screenId": "Home_CGM_Active", "action": "Taps hunger CTA", "annotation": "Always visible"},
        {"screenId": "HungerQuestionnaire", "action": "Rates hunger and fullness 1-5", "annotation": "Named scale anchors"},
        {"screenId": "HungerQuestionnaire", "action": "Sees feedback", "annotation": "Glucose insight card + educational tip"}
      ]
    },
    {
      "name": "Hunger Coach — Reactive Session",
      "steps": [
        {"screenId": "Home_CGM_Active", "action": "Taps Talk to your coach", "annotation": ""},
        {"screenId": "HungerCoach_Landing", "action": "Reviews glucose card, selects scenario", "annotation": "10 scenarios in 3 categories"},
        {"screenId": "HungerCoach_Scenario_StillHungry", "action": "Answers branching questions", "annotation": "When ate, what ate, stomach vs mouth"},
        {"screenId": "HungerCoach_Scenario_StillHungry", "action": "Commits to strategy", "annotation": "Logged for tracking"},
        {"screenId": "HungerCoach_Scenario_StillHungry", "action": "Selects outcome", "annotation": "Paused/ate intentionally/satisfied/learn more"}
      ]
    },
    {
      "name": "Hunger Coach — Proactive Pre-Meal",
      "steps": [
        {"screenId": "HungerCoach_Landing", "action": "Selects About to eat", "annotation": "Proactive scenario"},
        {"screenId": "HungerCoach_Scenario_AboutToEat", "action": "Assesses hunger level", "annotation": "Level-specific advice"},
        {"screenId": "HungerCoach_Scenario_AboutToEat", "action": "Starts 20-min meal timer", "annotation": "Vagus nerve pacing"}
      ]
    },
    {
      "name": "Hunger Coach — HALT Check",
      "steps": [
        {"screenId": "HungerCoach_Landing", "action": "Selects Not hungry but want to eat", "annotation": ""},
        {"screenId": "HungerCoach_Scenario_NotHungry", "action": "HALT grid: selects emotional state", "annotation": "Hungry/Angry-Anxious/Lonely-Bored/Tired"}
      ]
    },
    {
      "name": "Hunger Coach — Body Scan",
      "steps": [
        {"screenId": "HungerCoach_Landing", "action": "Selects Not sure if hungry", "annotation": ""},
        {"screenId": "HungerCoach_Scenario_Unsure", "action": "4-step guided body scan with timers", "annotation": "Interoception exercise"}
      ]
    },
    {
      "name": "Hunger Coach — Mini Lesson",
      "steps": [
        {"screenId": "HungerCoach_Landing", "action": "Selects Teach me about hunger", "annotation": ""},
        {"screenId": "HungerCoach_Scenario_TeachMe", "action": "Browses 5 mini-lessons", "annotation": "Types of hunger, hunger scale, GLP-1 effects, satiation, glucose-hunger"}
      ]
    },
    {
      "name": "Explore Graduation Timeline",
      "steps": [
        {"screenId": "Home_CGM_Active", "action": "Taps graduation card", "annotation": ""},
        {"screenId": "Toolkit_Main", "action": "Scrolls timeline, taps Block 1 dot", "annotation": "16 dots in 8 blocks"},
        {"screenId": "WeekDetail_Block1_Baseline", "action": "Reviews goal and education", "annotation": "Baseline: observe and log"},
        {"screenId": "Education_CGM_Basics", "action": "Reads article", "annotation": "1-3 min read"}
      ]
    },
    {
      "name": "Post-Block-4 Check-In and Unlock",
      "steps": [
        {"screenId": "Toolkit_Main", "action": "Taps locked Block 5", "annotation": ""},
        {"screenId": "WeekDetail_Block5_Locked", "action": "Taps Start your check-in", "annotation": ""},
        {"screenId": "Assessment_Post8_Intro", "action": "4-step flow", "annotation": "Insights -> quiz -> feedback -> focus"},
        {"screenId": "WeekDetail_Block5_Locked", "action": "", "annotation": "Now unlocked with personalized content"}
      ]
    },
    {
      "name": "CGM Toggle Experience",
      "steps": [
        {"screenId": "Home_CGM_Active", "action": "Views live glucose graph", "annotation": "Blue border, LIVE badge"},
        {"screenId": "Home_CGM_Off", "action": "Taps toggle to CGM Off", "annotation": "Amber, average day graph, elevated coach"}
      ]
    },
    {
      "name": "Sensor Comparison in Insights",
      "steps": [
        {"screenId": "Insights_Lifestyle", "action": "Views Lifestyle GPA and correlations", "annotation": ""},
        {"screenId": "Insights_Glucose", "action": "Taps Glucose tab, views sensor comparison", "annotation": "Overlaid CGM period curves"},
        {"screenId": "Insights_Graduation", "action": "Taps Graduation tab, views trend graph", "annotation": "Week-by-week scores"}
      ]
    },
    {
      "name": "Body Scanner Flow",
      "steps": [
        {"screenId": "Log_Main", "action": "Taps Body Scanner", "annotation": ""},
        {"screenId": "BodyScanner", "action": "Starts scan, waits 5s", "annotation": "Mock analysis"},
        {"screenId": "BodyScanner", "action": "Views results", "annotation": "Body fat, visceral fat, lifestyle bonus"}
      ]
    },
    {
      "name": "Program Reset",
      "steps": [
        {"screenId": "Settings", "action": "Taps Reset program", "annotation": "Red card"},
        {"screenId": "Settings", "action": "Confirms in modal", "annotation": "Clears localStorage"},
        {"screenId": "Onboarding_Welcome", "action": "", "annotation": "Returns to step 0"}
      ]
    },
    {
      "name": "Education Game Flow",
      "steps": [
        {"screenId": "Toolkit_Main", "action": "Taps Exercise section", "annotation": ""},
        {"screenId": "Game_ProteinGuess", "action": "Plays quiz rounds", "annotation": "Compare foods"},
        {"screenId": "Game_BuildBalancedPlate", "action": "Builds a meal", "annotation": "Protein + carb + veggie"}
      ]
    }
  ]
}
